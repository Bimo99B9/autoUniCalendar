<<<<<<< HEAD
# PostCSS Custom Media [<img src="https://postcss.github.io/postcss/logo.svg" alt="PostCSS Logo" width="90" height="90" align="right">][postcss]

[<img alt="npm version" src="https://img.shields.io/npm/v/postcss-custom-media.svg" height="20">][npm-url] [<img alt="CSS Standard Status" src="https://cssdb.org/images/badges/custom-media-queries.svg" height="20">][css-url] [<img alt="Build Status" src="https://github.com/csstools/postcss-plugins/workflows/test/badge.svg" height="20">][cli-url] [<img alt="Discord" src="https://shields.io/badge/Discord-5865F2?logo=discord&logoColor=white">][discord]

[PostCSS Custom Media] lets you define `@custom-media` in CSS following the [Custom Media Specification].
=======
# PostCSS Custom Media [<img src="https://postcss.github.io/postcss/logo.svg" alt="PostCSS" width="90" height="90" align="right">][postcss]

[![NPM Version][npm-img]][npm-url]
[![CSS Standard Status][css-img]][css-url]
[![Build Status][cli-img]][cli-url]
[![Support Chat][git-img]][git-url]

[PostCSS Custom Media] lets you use Custom Media Queries in CSS, following the
[CSS Media Queries] specification.
>>>>>>> 2cfd330b (move react to root dir)

```pcss
@custom-media --small-viewport (max-width: 30em);

@media (--small-viewport) {
<<<<<<< HEAD
	/* styles for small viewport */
=======
  /* styles for small viewport */
>>>>>>> 2cfd330b (move react to root dir)
}

/* becomes */

@media (max-width: 30em) {
<<<<<<< HEAD
	/* styles for small viewport */
=======
  /* styles for small viewport */
>>>>>>> 2cfd330b (move react to root dir)
}
```

## Usage

Add [PostCSS Custom Media] to your project:

```bash
<<<<<<< HEAD
npm install postcss postcss-custom-media --save-dev
```

Use it as a [PostCSS] plugin:
=======
npm install postcss-custom-media --save-dev
```

Use [PostCSS Custom Media] to process your CSS:

```js
const postcssCustomMedia = require('postcss-custom-media');

postcssCustomMedia.process(YOUR_CSS /*, processOptions, pluginOptions */);
```

Or use it as a [PostCSS] plugin:
>>>>>>> 2cfd330b (move react to root dir)

```js
const postcss = require('postcss');
const postcssCustomMedia = require('postcss-custom-media');

postcss([
<<<<<<< HEAD
	postcssCustomMedia(/* pluginOptions */)
]).process(YOUR_CSS /*, processOptions */);
```

[PostCSS Custom Media] runs in all Node environments, with special
instructions for:
=======
  postcssCustomMedia(/* pluginOptions */)
]).process(YOUR_CSS /*, processOptions */);
```

[PostCSS Custom Media] runs in all Node environments, with special instructions for:
>>>>>>> 2cfd330b (move react to root dir)

| [Node](INSTALL.md#node) | [PostCSS CLI](INSTALL.md#postcss-cli) | [Webpack](INSTALL.md#webpack) | [Create React App](INSTALL.md#create-react-app) | [Gulp](INSTALL.md#gulp) | [Grunt](INSTALL.md#grunt) |
| --- | --- | --- | --- | --- | --- |

## Options

### preserve

<<<<<<< HEAD
The `preserve` option determines whether the original notation
is preserved. By default, it is not preserved.

```js
postcssCustomMedia({ preserve: true })
```
=======
The `preserve` option determines whether custom media and atrules using custom
media should be preserved in their original form.
>>>>>>> 2cfd330b (move react to root dir)

```pcss
@custom-media --small-viewport (max-width: 30em);

@media (--small-viewport) {
<<<<<<< HEAD
	/* styles for small viewport */
=======
  /* styles for small viewport */
>>>>>>> 2cfd330b (move react to root dir)
}

/* becomes */

@custom-media --small-viewport (max-width: 30em);

@media (max-width: 30em) {
<<<<<<< HEAD
	/* styles for small viewport */
}

@media (--small-viewport) {
	/* styles for small viewport */
}
```


=======
  /* styles for small viewport */
}

@media (--small-viewport) {
  /* styles for small viewport */
}
```

>>>>>>> 2cfd330b (move react to root dir)
### importFrom

The `importFrom` option specifies sources where custom media can be imported
from, which might be CSS, JS, and JSON files, functions, and directly passed
objects.

```js
postcssCustomMedia({
<<<<<<< HEAD
	importFrom: 'path/to/file.css' // => @custom-selector --small-viewport (max-width: 30em);
=======
  importFrom: 'path/to/file.css' // => @custom-selector --small-viewport (max-width: 30em);
>>>>>>> 2cfd330b (move react to root dir)
});
```

```pcss
@media (max-width: 30em) {
<<<<<<< HEAD
	/* styles for small viewport */
}

@media (--small-viewport) {
	/* styles for small viewport */
=======
  /* styles for small viewport */
}

@media (--small-viewport) {
  /* styles for small viewport */
>>>>>>> 2cfd330b (move react to root dir)
}
```

Multiple sources can be passed into this option, and they will be parsed in the
order they are received. JavaScript files, JSON files, functions, and objects
will need to namespace custom media using the `customMedia` or
`custom-media` key.

```js
postcssCustomMedia({
<<<<<<< HEAD
	importFrom: [
		'path/to/file.css',
		'and/then/this.js',
		'and/then/that.json',
		{
			customMedia: { '--small-viewport': '(max-width: 30em)' }
		},
		() => {
			const customMedia = { '--small-viewport': '(max-width: 30em)' };

			return { customMedia };
		}
	]
=======
  importFrom: [
    'path/to/file.css',
    'and/then/this.js',
    'and/then/that.json',
    {
      customMedia: { '--small-viewport': '(max-width: 30em)' }
    },
    () => {
      const customMedia = { '--small-viewport': '(max-width: 30em)' };

      return { customMedia };
    }
  ]
>>>>>>> 2cfd330b (move react to root dir)
});
```

### exportTo

The `exportTo` option specifies destinations where custom media can be exported
to, which might be CSS, JS, and JSON files, functions, and directly passed
objects.

```js
postcssCustomMedia({
<<<<<<< HEAD
	exportTo: 'path/to/file.css' // @custom-media --small-viewport (max-width: 30em);
=======
  exportTo: 'path/to/file.css' // @custom-media --small-viewport (max-width: 30em);
>>>>>>> 2cfd330b (move react to root dir)
});
```

Multiple destinations can be passed into this option, and they will be parsed
in the order they are received. JavaScript files, JSON files, and objects will
need to namespace custom media using the `customMedia` or
`custom-media` key.

```js
const cachedObject = { customMedia: {} };

postcssCustomMedia({
<<<<<<< HEAD
	exportTo: [
		'path/to/file.css',   // @custom-media --small-viewport (max-width: 30em);
		'and/then/this.js',   // module.exports = { customMedia: { '--small-viewport': '(max-width: 30em)' } }
		'and/then/this.mjs',  // export const customMedia = { '--small-viewport': '(max-width: 30em)' } }
		'and/then/that.json', // { "custom-media": { "--small-viewport": "(max-width: 30em)" } }
		cachedObject,
		customMedia => {
			customMedia    // { '--small-viewport': '(max-width: 30em)' }
		}
	]
=======
  exportTo: [
    'path/to/file.css',   // @custom-media --small-viewport (max-width: 30em);
    'and/then/this.js',   // module.exports = { customMedia: { '--small-viewport': '(max-width: 30em)' } }
    'and/then/this.mjs',  // export const customMedia = { '--small-viewport': '(max-width: 30em)' } }
    'and/then/that.json', // { "custom-media": { "--small-viewport": "(max-width: 30em)" } }
    cachedObject,
    customMedia => {
      customMedia    // { '--small-viewport': '(max-width: 30em)' }
    }
  ]
>>>>>>> 2cfd330b (move react to root dir)
});
```

See example exports written to [CSS](test/export-media.css),
[JS](test/export-media.js), [MJS](test/export-media.mjs), and
[JSON](test/export-media.json).

<<<<<<< HEAD
[cli-url]: https://github.com/csstools/postcss-plugins/actions/workflows/test.yml?query=workflow/test
[css-url]: https://cssdb.org/#custom-media-queries
[discord]: https://discord.gg/bUadyRwkJS
[npm-url]: https://www.npmjs.com/package/postcss-custom-media

[Gulp PostCSS]: https://github.com/postcss/gulp-postcss
[Grunt PostCSS]: https://github.com/nDmitry/grunt-postcss
[PostCSS]: https://github.com/postcss/postcss
[PostCSS Loader]: https://github.com/postcss/postcss-loader
[PostCSS Custom Media]: https://github.com/csstools/postcss-plugins/tree/main/plugins/postcss-custom-media
[Custom Media Specification]: https://www.w3.org/TR/mediaqueries-5/#at-ruledef-custom-media
=======
[cli-img]: https://img.shields.io/travis/postcss/postcss-custom-media/master.svg
[cli-url]: https://travis-ci.org/postcss/postcss-custom-media
[css-img]: https://cssdb.org/badge/custom-media-queries.svg
[css-url]: https://cssdb.org/#custom-media-queries
[git-img]: https://img.shields.io/badge/support-chat-blue.svg
[git-url]: https://gitter.im/postcss/postcss
[npm-img]: https://img.shields.io/npm/v/postcss-custom-media.svg
[npm-url]: https://www.npmjs.com/package/postcss-custom-media

[CSS Media Queries]: https://drafts.csswg.org/mediaqueries-5/#custom-mq
[PostCSS]: https://github.com/postcss/postcss
[PostCSS Custom Media]: https://github.com/postcss/postcss-custom-media
>>>>>>> 2cfd330b (move react to root dir)
