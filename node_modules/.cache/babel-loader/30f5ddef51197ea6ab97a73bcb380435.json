{"ast":null,"code":"import useInput from\"../../hooks/use-input\";import HeaderSettingsButton from\"./HeaderSettingsButton\";import React from\"react\";import SettingsContext from\"../../store/settings-context\";import classes from\"./Form.module.css\";// Import the default state\nimport{DEFAULT_FILENAME,DEFAULT_UNIVERSITY}from\"../../store/settings-context\";// Component that represents the form\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Form=function Form(props){// Access the settings context\nvar ctx=React.useContext(SettingsContext);var _useInput=useInput(function(value){return value.length===37&&value.charAt(0)===\"0\"&&value.charAt(1)===\"0\"&&value.charAt(2)===\"0\"&&value.charAt(3)===\"0\"&&value.charAt(27)===\":\"&&value.charAt(28)===\"1\"&&value.charAt(29)===\"d\";}),enteredCode=_useInput.value,codeIsValid=_useInput.isValid,codeHasError=_useInput.hasError,codeChangeHandler=_useInput.valueChangeHandler,codeBlurHandler=_useInput.inputBlurHandler,codeReset=_useInput.reset;// Variable for the validity of the form\nvar formIsValid=codeIsValid;var formSubmissionHandler=function formSubmissionHandler(event){event.preventDefault();if(!codeIsValid){console.log(\"Code is not valid\");return;}document.getElementById(\"form\").submit();ctx.saveNameHandler(DEFAULT_FILENAME);ctx.check(DEFAULT_UNIVERSITY);codeReset();};// Styling for the form (error message)\nvar codeInputClasses=\"\".concat(classes.form,\" \").concat(codeHasError?classes.invalid:\"\");return/*#__PURE__*/_jsxs(React.Fragment,{children:[/*#__PURE__*/_jsxs(\"form\",{method:\"post\",onSubmit:formSubmissionHandler,id:\"form\",children:[/*#__PURE__*/_jsx(\"legend\",{children:\"epiCalendar\"}),/*#__PURE__*/_jsxs(\"div\",{className:classes.control,children:[/*#__PURE__*/_jsxs(\"div\",{className:codeInputClasses,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"codigo\",children:\"JSESSIONID\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"codigo\",name:\"jsessionid\",onChange:codeChangeHandler,onBlur:codeBlurHandler,value:enteredCode,placeholder:\"0000XXXXXXXXXXXXXXXXXXXXXXX:1dXXXXXXX\"}),codeHasError&&/*#__PURE__*/_jsx(React.Fragment,{children:/*#__PURE__*/_jsx(\"p\",{className:classes.error,children:\"El c\\xF3digo no es v\\xE1lido.\"})})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"filename\",value:ctx.saveas})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"location\",value:ctx.university===\"uo\"?ctx.oviedoCheck.parse:ctx.epiCheck.parse})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"experimental-location\",value:ctx.university===\"uo\"?ctx.oviedoCheck.experimental:ctx.epiCheck.experimental})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"class-type\",value:ctx.university===\"uo\"?ctx.oviedoCheck.classParsing:ctx.epiCheck.classParsing})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"hidden\",name:\"extension\",value:ctx.extension})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:classes.actions,children:[/*#__PURE__*/_jsx(HeaderSettingsButton,{onClick:props.onShowSettings}),/*#__PURE__*/_jsxs(\"button\",{className:\"button\",disabled:!formIsValid,onClick:formSubmissionHandler,children:[/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),/*#__PURE__*/_jsx(\"span\",{}),\"Generar\"]})]})]});};export default Form;","map":{"version":3,"names":["useInput","HeaderSettingsButton","React","SettingsContext","classes","DEFAULT_FILENAME","DEFAULT_UNIVERSITY","Form","props","ctx","useContext","value","length","charAt","enteredCode","codeIsValid","isValid","codeHasError","hasError","codeChangeHandler","valueChangeHandler","codeBlurHandler","inputBlurHandler","codeReset","reset","formIsValid","formSubmissionHandler","event","preventDefault","console","log","document","getElementById","submit","saveNameHandler","check","codeInputClasses","form","invalid","control","error","saveas","university","oviedoCheck","parse","epiCheck","experimental","classParsing","extension","actions","onShowSettings"],"sources":["/home/mier/git/epiCalendar/src/components/Form/Form.js"],"sourcesContent":["import useInput from \"../../hooks/use-input\";\nimport HeaderSettingsButton from \"./HeaderSettingsButton\";\nimport React from \"react\";\n\nimport SettingsContext from \"../../store/settings-context\";\nimport classes from \"./Form.module.css\";\n\n// Import the default state\nimport {\n  DEFAULT_FILENAME,\n  DEFAULT_UNIVERSITY,\n} from \"../../store/settings-context\";\n\n// Component that represents the form\nconst Form = (props) => {\n  // Access the settings context\n  const ctx = React.useContext(SettingsContext);\n\n  const {\n    value: enteredCode,\n    isValid: codeIsValid,\n    hasError: codeHasError,\n    valueChangeHandler: codeChangeHandler,\n    inputBlurHandler: codeBlurHandler,\n    reset: codeReset,\n  } = useInput(\n    (value) =>\n      value.length === 37 &&\n      value.charAt(0) === \"0\" &&\n      value.charAt(1) === \"0\" &&\n      value.charAt(2) === \"0\" &&\n      value.charAt(3) === \"0\" &&\n      value.charAt(27) === \":\" &&\n      value.charAt(28) === \"1\" &&\n      value.charAt(29) === \"d\"\n  );\n\n  // Variable for the validity of the form\n  let formIsValid = codeIsValid;\n\n  const formSubmissionHandler = (event) => {\n    event.preventDefault();\n    if (!codeIsValid) {\n      console.log(\"Code is not valid\");\n      return;\n    }\n\n    document.getElementById(\"form\").submit();\n    ctx.saveNameHandler(DEFAULT_FILENAME);\n    ctx.check(DEFAULT_UNIVERSITY);\n    codeReset();\n  };\n\n  // Styling for the form (error message)\n  const codeInputClasses = `${classes.form} ${\n    codeHasError ? classes.invalid : \"\"\n  }`;\n\n  return (\n    <React.Fragment>\n      <form method=\"post\" onSubmit={formSubmissionHandler} id=\"form\">\n        <legend>epiCalendar</legend>\n        <div className={classes.control}>\n          <div className={codeInputClasses}>\n            <label htmlFor=\"codigo\">JSESSIONID</label>\n            <input\n              type=\"text\"\n              id=\"codigo\"\n              name=\"jsessionid\"\n              onChange={codeChangeHandler}\n              onBlur={codeBlurHandler}\n              value={enteredCode}\n              placeholder=\"0000XXXXXXXXXXXXXXXXXXXXXXX:1dXXXXXXX\"\n            />\n            {codeHasError && (\n              <React.Fragment>\n                <p className={classes.error}>El código no es válido.</p>\n              </React.Fragment>\n            )}\n          </div>\n          <div>\n            <input type=\"hidden\" name=\"filename\" value={ctx.saveas} />\n          </div>\n          <div>\n            <input\n              type=\"hidden\"\n              name=\"location\"\n              value={\n                ctx.university === \"uo\"\n                  ? ctx.oviedoCheck.parse\n                  : ctx.epiCheck.parse\n              }\n            />\n          </div>\n          <div>\n            <input\n              type=\"hidden\"\n              name=\"experimental-location\"\n              value={\n                ctx.university === \"uo\"\n                  ? ctx.oviedoCheck.experimental\n                  : ctx.epiCheck.experimental\n              }\n            />\n          </div>\n          <div>\n            <input\n              type=\"hidden\"\n              name=\"class-type\"\n              value={\n                ctx.university === \"uo\"\n                  ? ctx.oviedoCheck.classParsing\n                  : ctx.epiCheck.classParsing\n              }\n            />\n          </div>\n          <div>\n            <input type=\"hidden\" name=\"extension\" value={ctx.extension} />\n          </div>\n        </div>\n      </form>\n\n      <div className={classes.actions}>\n        <HeaderSettingsButton onClick={props.onShowSettings} />\n        <button\n          className=\"button\"\n          disabled={!formIsValid}\n          onClick={formSubmissionHandler}\n        >\n          <span></span>\n          <span></span>\n          <span></span>\n          <span></span>\n          Generar\n        </button>\n      </div>\n    </React.Fragment>\n  );\n};\n\nexport default Form;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}