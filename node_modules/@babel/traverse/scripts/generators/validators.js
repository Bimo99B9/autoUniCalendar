import * as t from "@babel/types";
<<<<<<< HEAD
=======
import * as virtualTypes from "../../lib/path/lib/virtual-types.js";
>>>>>>> 2cfd330b (move react to root dir)

export default function generateValidators() {
  let output = `/*
 * This file is auto-generated! Do not modify it directly.
 * To re-generate run 'make build'
 */
<<<<<<< HEAD
import type * as t from "@babel/types";
import type NodePath from "../index";
import type { VirtualTypeNodePathValidators } from "../lib/virtual-types-validator";

interface BaseNodePathValidators {
=======
import * as t from "@babel/types";
import NodePath from "../index";
import type { VirtualTypeAliases } from "./virtual-types";

export interface NodePathValidators {
>>>>>>> 2cfd330b (move react to root dir)
`;

  for (const type of [...t.TYPES].sort()) {
    output += `is${type}<T extends t.Node>(this: NodePath<T>, opts?: object): this is NodePath<T & t.${type}>;`;
  }

<<<<<<< HEAD
  output += `
}

export interface NodePathValidators
  extends BaseNodePathValidators, VirtualTypeNodePathValidators {}
=======
  for (const type of Object.keys(virtualTypes)) {
    // TODO: Remove this check once we stop compiling to CJS
    if (type === "default" || type === "__esModule") continue;

    const { types } = virtualTypes[type];
    if (type[0] === "_") continue;
    if (t.NODE_FIELDS[type] || t.FLIPPED_ALIAS_KEYS[type]) {
      output += `is${type}<T extends t.Node>(this: NodePath<T>, opts?: object): this is NodePath<T & t.${type}>;`;
    } else if (types /* in VirtualTypeAliases */) {
      output += `is${type}<T extends t.Node>(this: NodePath<T>, opts?: object): this is NodePath<T & VirtualTypeAliases["${type}"]>;`;
    } else if (type === "Pure") {
      output += `isPure(constantsOnly?: boolean): boolean;`;
    } else {
      // if it don't have types, then VirtualTypeAliases[type] is t.Node
      // which TS marked as always true
      // eg. if (path.isBlockScope()) return;
      //     path resolved to `never` here
      // so we have to return boolean instead of this is NodePath<t.Node> here
      output += `is${type}(opts?: object): boolean;`;
    }
  }

  output += `
}
>>>>>>> 2cfd330b (move react to root dir)
`;

  return output;
}
